<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>â±ï¸ ë¯¸ë‹ˆ ìŠ¤í†±ì›Œì¹˜ (ë©íƒ€ì„ í¬í•¨)</title>
    <style>
      body {
        font-family: system-ui, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 16px;
        padding: 40px;
      }
      h1 {
        margin: 0;
      }
      .time {
        font-size: 48px;
        letter-spacing: 2px;
      }
      .btns {
        display: flex;
        gap: 8px;
      }
      button {
        padding: 10px 16px;
        border: 0;
        border-radius: 10px;
        cursor: pointer;
      }
      button.primary {
        background: #222;
        color: #fff;
      }
      button.warn {
        background: #f3f3f3;
      }
      ol {
        width: 320px;
        margin: 0;
        padding-left: 24px;
      }
      li {
        display: flex;
        justify-content: space-between;
        padding: 6px 0;
        border-bottom: 1px solid #eee;
      }
      .small {
        color: #666;
        font-size: 12px;
      }
    </style>
  </head>
  <body>
    <h1>ğŸ‘§ğŸ» ë¯¸ë‹ˆ ìŠ¤í†±ì›Œì¹˜</h1>
    <div class="time" id="display">00:00.00</div>
    <div class="btns">
      <button id="toggle" class="primary">ì‹œì‘</button>
      <button id="lap" class="warn" disabled>ë©íƒ€ì„</button>
      <button id="reset" class="warn" disabled>ì´ˆê¸°í™”</button>
    </div>

    <ol id="laps"></ol>
    <div class="small">TIP: ì‹œì‘ â–¶ ë©íƒ€ì„ ì—¬ëŸ¬ ë²ˆ â–¶ ì •ì§€ â–¶ ì´ˆê¸°í™”</div>

    <script>
      // ìƒíƒœ ë³€ìˆ˜ë“¤
      let startAt = 0; // íƒ€ì´ë¨¸ë¥¼ ì‹œì‘í•œ ì‹œì  (ms)
      let elapsed = 0; // ëˆ„ì  ê²½ê³¼ ì‹œê°„ (ms)
      let timerId = null; // setInterval í•¸ë“¤
      let lapIdx = 1;

      const $display = document.getElementById("display");
      const $toggle = document.getElementById("toggle");
      const $lap = document.getElementById("lap");
      const $reset = document.getElementById("reset");
      const $laps = document.getElementById("laps");

      // ìˆ«ìë¥¼ 2ìë¦¬ë¡œ ì˜ˆì˜ê²Œ: 3 -> "03"
      const pad2 = (n) => String(n).padStart(2, "0");

      // ms(ë°€ë¦¬ì´ˆ)ë¥¼ "MM:SS.hh" ë¡œ í¬ë§·
      function fmt(ms) {
        const total = Math.floor(ms / 10); // 10ms ë‹¨ìœ„
        const hh = total % 100; // 0~99 (ì„¼í‹°ì´ˆ)
        const s = Math.floor(total / 100) % 60;
        const m = Math.floor(total / 6000);
        return `${pad2(m)}:${pad2(s)}.${pad2(hh)}`;
      }

      function render() {
        const nowElapsed = timerId ? Date.now() - startAt : elapsed;
        $display.textContent = fmt(nowElapsed);
      }

      function start() {
        startAt = Date.now() - elapsed; // ì¼ì‹œì •ì§€ í›„ ì¬ì‹œì‘ ëŒ€ì‘
        timerId = setInterval(render, 10); // 0.01ì´ˆë§ˆë‹¤ ì—…ë°ì´íŠ¸
        $toggle.textContent = "ì •ì§€";
        $lap.disabled = false;
        $reset.disabled = false;
      }

      function stop() {
        clearInterval(timerId);
        timerId = null;
        elapsed = Date.now() - startAt;
        render();
        $toggle.textContent = "ì‹œì‘";
        // ì •ì§€ í›„ì—ë„ ë©/ì´ˆê¸°í™”ëŠ” ê°€ëŠ¥í•˜ê²Œ ìœ ì§€
      }

      function reset() {
        stop(); // ì•ˆì „í•˜ê²Œ ë©ˆì¶”ê³ 
        elapsed = 0;
        lapIdx = 1;
        $laps.innerHTML = "";
        render();
        $lap.disabled = true;
        $reset.disabled = true;
      }

      function addLap() {
        const nowElapsed = timerId ? Date.now() - startAt : elapsed;
        const li = document.createElement("li");
        li.innerHTML = `<span>#${lapIdx++}</span><span>${fmt(
          nowElapsed
        )}</span>`;
        $laps.prepend(li); // ìµœì‹  ë©ì´ ìœ„ë¡œ ì˜¤ê²Œ
      }

      // ì´ë²¤íŠ¸ ì—°ê²°
      $toggle.addEventListener("click", () => (timerId ? stop() : start()));
      $lap.addEventListener("click", addLap);
      $reset.addEventListener("click", reset);

      // ì´ˆê¸° ë Œë”
      render();
    </script>
  </body>
</html>
