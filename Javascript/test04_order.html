<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ì£¼ë¬¸ í˜ì´ì§€</title>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #fff;
    color: #333;
  }
  .order-container {
    width: 800px;
    margin: 20px auto;
    padding: 30px;
    border: 1px solid #ddd;
    border-radius: 12px;
    background: #fff;
  }
  h2 { color: #DC0630; }
  .section { margin-bottom: 20px; }
  label { font-weight: bold; display: block; margin-bottom: 5px; }
  input, select {
    width: 100%; padding: 8px; margin-bottom: 10px;
    border: 1px solid #ccc; border-radius: 5px;
  }
  .summary {
    position: sticky; top: 20px;
    padding: 15px; background: #f9f9f9;
    border: 1px solid #ddd; border-radius: 10px;
  }
  button {
    background: #DC0630; color: white;
    padding: 12px 20px; border: none;
    border-radius: 8px; font-weight: bold;
    cursor: pointer;
  }
  button:hover { background: #b40428; }
</style>
</head>
<body>
  <div class="order-container">
    <h2>ğŸ›’ ì£¼ë¬¸ì„œ ì‘ì„±</h2>

    <!-- ë°°ì†¡ì§€ ì…ë ¥ -->
    <div class="section">
      <label>ë°›ëŠ” ì‚¬ëŒ</label>
      <input type="text" id="receiver">

      <label>ì£¼ì†Œ</label>
      <input type="text" id="address">

      <label>ì—°ë½ì²˜</label>
      <input type="text" id="phone">
    </div>

    <!-- ê²°ì œ ìˆ˜ë‹¨ -->
    <div class="section">
      <label>ê²°ì œ ìˆ˜ë‹¨</label>
      <select id="paymentMethod">
        <option value="card">ğŸ’³ ì‹ ìš©/ì²´í¬ì¹´ë“œ</option>
        <option value="bank">ğŸ¦ ê³„ì¢Œì´ì²´</option>
        <option value="easy">âš¡ ê°„í¸ê²°ì œ</option>
        <option value="point">â­ í¬ì¸íŠ¸</option>
      </select>
    </div>

    <!-- ì£¼ë¬¸ ìƒí’ˆ -->
    <div class="section">
      <h3>ìƒí’ˆ ëª©ë¡</h3>
      <table border="1" width="100%">
        <tr><th>ìƒí’ˆëª…</th><th>ìˆ˜ëŸ‰</th><th>ê°€ê²©</th></tr>
        <tr>
          <td>ìƒ¤í”„</td>
          <td><input type="number" class="qty" value="1" min="1" data-price="2000"></td>
          <td class="subtotal">2000</td>
        </tr>
        <tr>
          <td>ë…¸íŠ¸</td>
          <td><input type="number" class="qty" value="2" min="1" data-price="1500"></td>
          <td class="subtotal">3000</td>
        </tr>
      </table>
    </div>

    <!-- ê²°ì œ ìš”ì•½ -->
    <div class="summary">
      <h3>ê²°ì œì •ë³´</h3>
      <p>ì´ ìƒí’ˆê¸ˆì•¡: <span id="totalPrice">5000</span>ì›</p>
      <button id="btnOrder">âœ… ì£¼ë¬¸í•˜ê¸°</button>
    </div>
  </div>

<script>
  // ìˆ˜ëŸ‰ ë³€ê²½ ì‹œ í•©ê³„ ê°±ì‹ 
  $(document).on("input", ".qty", function() {
    var price = $(this).data("price");   // data-price ì†ì„±ê°’
    var qty = $(this).val();
    var subtotal = price * qty;

    // ì†Œê³„ ê°±ì‹ 
    $(this).closest("tr").find(".subtotal").text(subtotal);

    // ì´ì•¡ ë‹¤ì‹œ ê³„ì‚°
    updateTotal();
  });

  // ì´ì•¡ ê³„ì‚° í•¨ìˆ˜
  function updateTotal(){
    var total = 0;
    $(".subtotal").each(function(){
      total += Number($(this).text());
    });
    $("#totalPrice").text(total);
  }

  // ì£¼ë¬¸í•˜ê¸° ë²„íŠ¼
  $("#btnOrder").click(function(){
    var receiver = $("#receiver").val();
    var address = $("#address").val();
    var phone = $("#phone").val();
    var payment = $("#paymentMethod").val();
    var total = $("#totalPrice").text();

    if(!receiver || !address || !phone){
      alert("ë°°ì†¡ì§€ ì •ë³´ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!");
      return;
    }

    alert("ì£¼ë¬¸ ì™„ë£Œ!\në°›ëŠ” ì‚¬ëŒ: " + receiver + "\nì´ ê²°ì œê¸ˆì•¡: " + total + "ì›\nê²°ì œ ìˆ˜ë‹¨: " + payment);

    // ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” AJAXë¡œ ì„œë²„ì— ì£¼ë¬¸ì •ë³´ ì „ë‹¬
    /*
    $.ajax({
      url: "/orderInsert.do",
      type: "post",
      data: {receiver, address, phone, payment, total},
      success: function(res){ alert("ì£¼ë¬¸ ì„±ê³µ!"); },
      error: function(){ alert("ì£¼ë¬¸ ì‹¤íŒ¨!"); }
    });
    */
  });
</script>
</body>
</html>
