<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>íšŒì› ì£¼ë¬¸ë‚´ì—­ (JS ë²„ì „) â€” ë¯¸ë¦¬ë³´ê¸°</title>
  <style>
    :root{--brand:#DC0630;--bg:#fff;--muted:#666}
    *{box-sizing:border-box}
    body{font-family:Inter, Noto Sans KR, Arial, sans-serif;background:linear-gradient(180deg,#fff 0%, #fff8f8 100%);padding:28px;color:#222}
    .wrap{max-width:980px;margin:0 auto}
    header{display:flex;align-items:center;gap:14px;margin-bottom:18px}
    .logo{width:60px;height:60px;border-radius:12px;background:var(--brand);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
    .card{background:#fff;border-radius:14px;padding:16px;box-shadow:0 10px 30px rgba(220,6,48,0.06)}

    .controls{display:flex;gap:10px;align-items:center;margin-bottom:12px}
    .controls input{flex:1;padding:10px 12px;border:1px solid #eee;border-radius:10px}
    .controls select,.controls button{padding:10px 12px;border-radius:10px;border:1px solid #eee;background:#fff}
    .controls button.primary{background:var(--brand);color:#fff;border:none}

    table{width:100%;border-collapse:collapse}
    th,td{padding:12px 8px;text-align:left;border-bottom:1px solid #faf0f0;font-size:14px}
    th{color:var(--muted);font-weight:600}
    .price{font-weight:700;color:var(--brand)}
    .status{display:inline-block;padding:6px 10px;border-radius:999px;font-size:13px}
    .status.pending{background:#fff0f3;color:var(--brand);border:1px solid #ffdede}
    .status.done{background:#f3fff8;color:#0a8a32;border:1px solid #d6f5df}

    .btn{padding:8px 10px;border-radius:8px;border:1px solid #eee;background:#fff;cursor:pointer}

    /* modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.35);z-index:60}
    .modal .dialog{background:#fff;padding:18px;border-radius:12px;max-width:720px;width:94%}

    @media(max-width:720px){
      th:nth-child(3),td:nth-child(3),th:nth-child(4),td:nth-child(4){display:none}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">SHOP</div>
      <div>
        <h1 style="margin:0;font-size:20px">íšŒì› ì£¼ë¬¸ë‚´ì—­ ë¯¸ë¦¬ë³´ê¸° ğŸ‘§ğŸ»</h1>
        <div style="color:#777;font-size:13px">ì‹¤ì œ íšŒì› í˜ì´ì§€ì²˜ëŸ¼ ë³´ì´ë„ë¡ ë§Œë“  ë”ë¯¸ ë°ëª¨ (JS)</div>
      </div>
    </header>

    <div class="card">
      <div class="controls">
        <input id="q" placeholder="ì£¼ë¬¸ë²ˆí˜¸ / ìƒí’ˆëª… / ìˆ˜ë ¹ì¸ ê²€ìƒ‰" />
        <select id="status">
          <option value="all">ì „ì²´ ìƒíƒœ</option>
          <option value="pending">ê²°ì œëŒ€ê¸°</option>
          <option value="paid">ê²°ì œì™„ë£Œ</option>
          <option value="shipped">ë°°ì†¡ì¤‘</option>
          <option value="done">ë°°ì†¡ì™„ë£Œ</option>
          <option value="cancel">ì·¨ì†Œ/í™˜ë¶ˆ</option>
        </select>
        <button id="csv" class="btn">CSV</button>
        <button id="reset" class="btn">ì´ˆê¸°í™”</button>
      </div>

      <div style="overflow-x:auto">
        <table id="ordersTable">
          <thead>
            <tr>
              <th>ì£¼ë¬¸ë²ˆí˜¸</th>
              <th>ì£¼ë¬¸ì¼</th>
              <th>ìƒí’ˆ/ìˆ˜ëŸ‰</th>
              <th>ê¸ˆì•¡</th>
              <th>ìƒíƒœ</th>
              <th>ì‘ì—…</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
        <div id="summary">ì „ì²´ 0ê±´</div>
        <div style="display:flex;gap:8px">
          <button id="prev" class="btn">ì´ì „</button>
          <button id="next" class="btn primary">ë‹¤ìŒ</button>
        </div>
      </div>
    </div>
  </div>

  <div id="modal" class="modal" aria-hidden="true">
    <div class="dialog">
      <h3 id="mTitle">ì£¼ë¬¸ ìƒì„¸</h3>
      <div id="mBody"></div>
      <div style="text-align:right;margin-top:12px"><button id="closeModal" class="btn">ë‹«ê¸°</button></div>
    </div>
  </div>

  <script>
    // ë”ë¯¸ íšŒì› ì£¼ë¬¸ ë°ì´í„° (ê°„ë‹¨í•œ ìƒ˜í”Œ)
    const orders = [];
    const sts = ['pending','paid','shipped','done','cancel'];
    for(let i=0;i<34;i++){
      orders.push({
        id: 'M' + (20254000 + i),
        date: new Date(Date.now() - i*86400000).toISOString().slice(0,10),
        items: [{name:`ê·€ì—¬ìš´ í‚¤ë§ #${i+1}`, qty: Math.floor(Math.random()*3)+1}],
        total: (Math.floor(Math.random()*120)+15) * 1000,
        status: sts[i % sts.length],
        recipient: `ê¹€ìˆ˜ë ¹${i+1}`
      });
    }

    let state = {page:1, perPage:7, q:'', status:'all'};
    const tbody = document.querySelector('#ordersTable tbody');
    const summary = document.getElementById('summary');

    function formatPrice(n){ return n.toLocaleString() + 'ì›'; }

    function renderStatus(s){
      if(s==='pending') return `<span class="status pending">ê²°ì œëŒ€ê¸°</span>`;
      if(s==='paid') return `<span class="status">ê²°ì œì™„ë£Œ</span>`;
      if(s==='shipped') return `<span class="status">ë°°ì†¡ì¤‘</span>`;
      if(s==='done') return `<span class="status done">ë°°ì†¡ì™„ë£Œ</span>`;
      if(s==='cancel') return `<span class="status">ì·¨ì†Œ/í™˜ë¶ˆ</span>`;
      return `<span class="status">ì•Œìˆ˜ì—†ìŒ</span>`;
    }

    function filterAndPage(){
      const q = state.q.trim().toLowerCase();
      let data = orders.filter(o => {
        if(state.status !== 'all' && o.status !== state.status) return false;
        if(!q) return true;
        return o.id.toLowerCase().includes(q) || o.items.some(it=>it.name.toLowerCase().includes(q)) || o.recipient.toLowerCase().includes(q);
      });
      const total = data.length;
      const pages = Math.max(1, Math.ceil(total/state.perPage));
      if(state.page > pages) state.page = pages;
      const start = (state.page-1)*state.perPage;
      const pageData = data.slice(start, start+state.perPage);
      return {data:pageData, total, pages};
    }

    function render(){
      const res = filterAndPage();
      tbody.innerHTML = '';
      res.data.forEach(o => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td><button class="btn" onclick="openDetail('${o.id}')">${o.id}</button></td>
          <td>${o.date}</td>
          <td>${o.items.map(it=>`${it.name} x${it.qty}`).join('<br>')}</td>
          <td class="price">${formatPrice(o.total)}</td>
          <td>${renderStatus(o.status)}</td>
          <td><button class="btn" onclick="reorder('${o.id}')">ì¬ì£¼ë¬¸</button></td>
        `;
        tbody.appendChild(tr);
      });
      summary.textContent = `ì „ì²´ ${res.total}ê±´ Â· ${state.page}/${res.pages} í˜ì´ì§€`;
    }

    // controls
    document.getElementById('q').addEventListener('input', e=>{ state.q = e.target.value; state.page=1; render(); });
    document.getElementById('status').addEventListener('change', e=>{ state.status = e.target.value; state.page=1; render(); });
    document.getElementById('prev').addEventListener('click', ()=>{ if(state.page>1){ state.page--; render(); }});
    document.getElementById('next').addEventListener('click', ()=>{ state.page++; render(); });
    document.getElementById('reset').addEventListener('click', ()=>{ state={page:1,perPage:7,q:'',status:'all'}; document.getElementById('q').value=''; document.getElementById('status').value='all'; render(); });

    document.getElementById('csv').addEventListener('click', ()=>{
      const rows = [['ì£¼ë¬¸ë²ˆí˜¸','ì£¼ë¬¸ì¼','ìƒí’ˆ','ê¸ˆì•¡','ìƒíƒœ','ìˆ˜ë ¹ì¸']];
      orders.forEach(o=> rows.push([o.id,o.date,o.items.map(it=>`${it.name} x${it.qty}`).join('|'),o.total,o.status,o.recipient]));
      const csv = rows.map(r => r.map(c=>'"'+String(c).replace(/"/g,'""')+'"').join(',')).join('\n');
      const blob = new Blob([csv],{type:'text/csv'});
      const url = URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='member-orders.csv'; a.click(); URL.revokeObjectURL(url);
    });

    // modal/detail
    window.openDetail = function(id){
      const o = orders.find(x=>x.id===id);
      const b = document.getElementById('mBody');
      b.innerHTML = `\n        <p><strong>ì£¼ë¬¸ë²ˆí˜¸:</strong> ${o.id}</p>\n        <p><strong>ì£¼ë¬¸ì¼:</strong> ${o.date}</p>\n        <p><strong>ìˆ˜ë ¹ì¸:</strong> ${o.recipient}</p>\n        <p><strong>ìƒí’ˆ:</strong></p>\n        <ul>${o.items.map(it=>`<li>${it.name} â€” ìˆ˜ëŸ‰ ${it.qty}</li>`).join('')}</ul>\n        <p><strong>ì´ì•¡:</strong> ${formatPrice(o.total)}</p>\n        <p><strong>ìƒíƒœ:</strong> ${renderStatus(o.status)}</p>`;
      const m = document.getElementById('modal'); m.style.display='flex'; m.setAttribute('aria-hidden','false');
    }
    document.getElementById('closeModal').addEventListener('click', ()=>{ const m = document.getElementById('modal'); m.style.display='none'; m.setAttribute('aria-hidden','true'); });

    window.reorder = function(id){ alert(id + ' ì¬ì£¼ë¬¸(ë°ëª¨)'); }

    render();
  </script>
</body>
</html>
